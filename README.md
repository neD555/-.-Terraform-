### Итоговый проект модуля «Облачная инфраструктура. Terraform»
### Задание 1. Развертывание инфраструктуры в Yandex Cloud.

Создайте Virtual Private Cloud (VPC).

Создайте подсети.

Создайте виртуальные машины (VM):

Настройте группы безопасности (порты 22, 80, 443).

Привяжите группу безопасности к VM.

### Опишите создание БД MySQL в Yandex Cloud
Для создания базы данных MySQL в Yandex Cloud используется сервис Managed Service for MySQL.

В консоли Yandex Cloud в выбранном каталоге создаётся кластер MySQL с указанием версии СУБД, окружения (Prestable/Development), зоны доступности и сети VPC.

Для кластера задаются вычислительные ресурсы и параметры хранилища.

После создания кластера создаётся база данных и пользователь с необходимыми правами доступа.

Подключение к базе осуществляется по внутреннему FQDN из виртуальной машины, находящейся в той же сети.

### Опишите создание Container Registry.

Container Registry в Yandex Cloud создаётся через сервис Container Registry в консоли управления.

В выбранном каталоге создаётся Docker-реестр, предназначенный для хранения образов контейнеров.

После создания реестра пользователю доступны операции загрузки (push) и скачивания (pull) Docker-образов с использованием Docker CLI и учётных данных Yandex Cloud.

### Ответ.
<img width="1080" height="264" alt="Задание 1(1)" src="https://github.com/user-attachments/assets/cd4a5a1c-846f-49ca-a9ee-f1e0327ce562" />
<img width="869" height="335" alt="Задание 1(2)" src="https://github.com/user-attachments/assets/49cca7c9-51e3-4ea4-b115-e0fef70736b5" />
<img width="1179" height="469" alt="Задание 1(3)" src="https://github.com/user-attachments/assets/9a82da75-3554-4488-bf47-c115d176fd9f" />
<img width="1390" height="556" alt="Задание 1(4)" src="https://github.com/user-attachments/assets/255fd75e-5468-4220-aec7-b1893f4d34e1" />
<img width="1471" height="822" alt="Задание 1(5)" src="https://github.com/user-attachments/assets/9561ff08-a010-4164-bd4b-10d2719b865d" />
<img width="1469" height="799" alt="Задание 1(6)" src="https://github.com/user-attachments/assets/e0cec411-1d88-4c2f-8a26-d9014b2511a7" />
<img width="1500" height="707" alt="Задание 1(7)" src="https://github.com/user-attachments/assets/f6f492f4-6d49-4353-bdbd-21804c0c5164" />
<img width="1484" height="356" alt="Задание 1(8)" src="https://github.com/user-attachments/assets/fdc1a1bb-b954-4cb2-ac2c-4b0422954a8a" />
<img width="1495" height="789" alt="Задание 1(9)" src="https://github.com/user-attachments/assets/8451dca9-6937-4f4c-a965-d3507f2de40f" />

### Задание 2. 

Используя user-data (cloud-init), установите Docker и Docker Compose (см. Задания 5 модуля «Виртуализация и контейнеризация»).

### Ответ.

Для автоматической установки Docker и Docker Compose при создании виртуальной машины используется механизм cloud-init (user-data).

В metadata виртуальной машины передаётся cloud-init конфигурация, которая при первом запуске ОС выполняет обновление пакетов, установку Docker Engine, добавляет пользователя в группу docker и устанавливает Docker Compose.

Такой подход позволяет автоматически подготовить окружение без ручной настройки после запуска виртуальной машины.

### Задание 3. Опишите Docker файл (см. Задания 5 «Виртуализация и контейнеризация») c web-приложением и сохраните контейнер в Container Registry
### Ответ.
Для упаковки web-приложения используется Dockerfile.

В Dockerfile указывается базовый образ с необходимым runtime, задаётся рабочая директория контейнера, копируются файлы приложения и устанавливаются зависимости.

Также в Dockerfile определяется порт, на котором работает приложение, и команда запуска контейнера.

После описания Dockerfile выполняется сборка Docker-образа с помощью команды docker build.

Собранный образ тегируется в формате cr.yandex/<registry_id>/<image_name>:<tag> и сохраняется в Container Registry с помощью команды docker push.

Container Registry используется как централизованное хранилище Docker-образов, что позволяет повторно использовать контейнер для развёртывания приложения на виртуальных машинах без необходимости пересборки образа.

Пример Dockerfile:

FROM python:3.12-slim
WORKDIR /app
COPY requirements.txt .
RUN pip install -r requirements.txt
COPY app.py .
EXPOSE 8080
CMD ["python", "app.py"]

### Задание 4. Завяжите работу приложения в контейнере на БД в Yandex Cloud.

### Ответ.
Для организации взаимодействия контейнеризованного web-приложения с базой данных используется Managed Service for MySQL в Yandex Cloud.

Контейнер с приложением развёртывается на виртуальной машине, находящейся в той же виртуальной сети (VPC), что и кластер MySQL, что обеспечивает сетевую связность между сервисами.

Доступ к базе данных настраивается с помощью группы безопасности, в которой разрешено входящее соединение по порту 3306 от виртуальной машины или её группы безопасности.

Для подключения к базе данных используется внутренний FQDN кластера MySQL, а также имя базы данных и пользователь, созданные ранее.

Параметры подключения к базе данных передаются в контейнер через переменные окружения, такие как адрес сервера, порт, имя базы данных, пользователь и пароль.

Приложение при запуске считывает данные параметры из окружения и устанавливает соединение с базой данных MySQL.

Работоспособность связки подтверждается успешным подключением приложения к базе данных и выполнением тестового запроса, что демонстрирует корректную интеграцию контейнерного приложения с управляемой базой данных в Yandex Cloud.

### Задание 5*. Положите пароли от БД в LockBox и настройте интеграцию с Terraform так, чтобы пароль для БД брался из LockBox.

### Ответ.
Для безопасного хранения пароля от базы данных MySQL используется сервис Yandex Lockbox.

В Lockbox создан пользовательский секрет, содержащий пароль для подключения к базе данных.

Доступ к секрету предоставлен сервисному аккаунту, от имени которого выполняется Terraform.

В Terraform используется data source Yandex Lockbox для получения значения секрета.

Полученное значение применяется при создании пользователя MySQL, что позволяет не хранить пароль в открытом виде в конфигурационных файлах Terraform.

Такой подход повышает безопасность и упрощает ротацию паролей без изменения кода инфраструктуры.

<img width="1483" height="701" alt="Задание 5(1)" src="https://github.com/user-attachments/assets/e1373528-976b-4e23-9bf1-4f05369af0ac" />
<img width="1488" height="346" alt="Задание 5(2)" src="https://github.com/user-attachments/assets/c5d28ae2-eeca-4a19-94a9-9669a6f48808" />







